
\section{Introduction}

The recent WebRTC technology has opened a new playground for large-scale
distributed web applications. Among others, distributed collaborative editors
such as Google Docs, SubEthaEdit, or Etherpad, have proven their
usefulness. Such editors allow distributing the work across space, time and
organizations. However, they have several limitations that preclude the
existence of a massive distributed collaborative editor. 

% due either to
% centralisation (e.g. single-point-of-failure, privacy issues, economic
% intelligence issues, limitations in terms of service) or to decentralisation
% (e.g. number of users, concurrency and synchronisation, number of
% operations). For instance Google~\cite{nichols1995high} allows only 50 users to
% write a document together at a same time. These scalability issues preclude the
% existence of a massive distributed collaborative editor.

Distributed collaborative editors use the optimistic replication
scheme~\cite{johnson1975maintenance, saito2005optimistic} to provide high
availability and responsiveness. Locally, each user involved in the
collaboration owns a copy of the document (replica). Local operations are
executed and become effective locally before being broadcast. Remotely, each
user integrates the received operations to her replica. The convergence property
of optimistic replication states that replicas are allowed to temporarily
diverge. Yet, the resulting replicas become identical when all collaborators
have received all changes~\cite{demers1987epidemic}.  Thus, optimistic
replication requires
\begin{inparaenum}[(i)]
\item a shared data type that ensures
  consistency and
\item an algorithm to disseminate changes.
\end{inparaenum}

As shared data type, most of state-of-the-art editors use operational
transformations~\cite{sun1998operational, sun2009contextbased}
(OT). Unfortunately, the time complexity of the integration of operations is
quadratically \TODO{upper}-bounded by the number of concurrent operations
relatively to the integrated one. In other terms, all collaborators suffer from
few concurrent operations making OT approaches non practical because of
\TODO{unpredictable latency}.

For the information dissemination, \TODO{most} of distributed collaborative
editors (REF) running as web applications rely on a central server to spread the
operations. The topology itself brings single-point-of-failure, privacy issues,
economic intelligence issues, limitations in terms of service, and lack of
scalability.

In this paper, we introduce \CRATE, a distributed and decentralized
collaborative editor running in web browsers. It uses a family of distributed
data structure called Conflict-free Replicated Data
Type~\cite{shapiro2011comprehensive, shapiro2011conflict} (CRDT) well-suited to
handle concurrency. To ensure convergence, a unique and immutable identifier is
associated with each element (e.g. character, words, line, paragraph) in the
sequence (i.e. document). \CRATE uses \LSEQ~\cite{nedelec2013concurrency,
  nedelec2013lseq} to allocate identifiers enjoying a sub-linear upper-bound on
space complexity compared to the number of insertions in the document. To
propagate the operations, \CRATE uses \SPRAY, a random peer sampling protocol
that automatically adjusts the neighborhood of each peer to reflect the editing
session membership. As such, it efficiently disseminates the changes performed
to the document, it is resilient to non-correlated failures, it balances the
load among peers etc.

Contribution of this paper are:
\begin{itemize}
\item An in-depth description of \CRATE and its core-components, namely \LSEQ
  and \SPRAY.
\item Experimental studies that validate the space complexity of \LSEQ and the
  scalability of \CRATE. Parts of theses experiments ran on the Grid'5000
  testbed and involved up to $500$ emulated peers creating a document of more
  than one million characters at a global rate of one hundred operations per
  second.
\end{itemize}

The remainder of this paper is organized as
follows. Section~\ref{sec:preliminaries} provides the necessary background to
sequence data structures and the motivations. Section~\ref{sec:proposal}
follows with a description of \LSEQ and the proof of its space
complexity. Section \ref {sec:experiments} highlights the scalability of
\CRATE while validating the space complexity analysis of
\LSEQ. Section~\ref{sec:relatedwork} reviews related works. Finally,
Section~\ref{sec:conclusion} concludes the paper.

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "../paper"
%%% End: 
