
\section{Introduction}

Google Docs made real-time editing in browsers easy for millions of
users. However, Google mediates real-time editing sessions with
central servers raising issues on privacy, censorship, economic
intelligence. It also raises scalability issues in term of number of
participants.  Despite that small groups currently constitute the main
range of users, events such as massive online lectures, TV shows,
conferences gather larger groups.  Google Docs support large groups
but only the fifty the first users can edit, next users have their rights
limited to document reading. We think that a real-time edit shoud
allow anyone to edit anytime, anywhere whatever the number of
participants. Real-time editing session can be highly dynamic; the number of
participants can significantly change and event if just few people are
editing at a tme, the set of editors can change anytime. In this paper
we focus on building a real-time editor that better support privacy
and can adapt gently from small groups to large groups.

Decentralized real-time editors~\cite{oster2006data,
  sun1998operational, sun2009contextbased} do not require intermediate
servers and by the same solve privacy issues. However, scalability
issues remain.  Addressing scalability requires finding a good
trade-off between communication, space and time
complexities. Achieving a sublinear communication complexity compared
to the editing session size is crucial for supporting large groups. In
the best case, if we have $n$ participants, sending a typed character to
others requires to contact $log(n)$ participants. But consistency
maintenance of real-time editors requires to piggyback to each
message extra informations that impact greatly the whole communication
complexity.

Decentralized algorithms of operational
transformation~\cite{sun2009contextbased} require piggybacking a state
vector in order to detect concurrent operations. Unfortunately, state
vectors grow linearly compared to the number of participants that ever
participated in the authoring.

Conflict-Free Replicated Data Types~\cite{shapiro2011comprehensive}
(CRDTs) such as WOOT~\cite{oster2006data} piggyback a constant-size
identifier which is optimal. Nonetheless, their local space complexity
grows monotonically which eventually leads to the need of costly
garbage collecting. Other algorithms~\cite{preguica2009commutative,
  weiss2010logootundo} limit their local space
consumption. Nevertheless, they piggyback variable-size identifiers
that can grow linearly compared to the document size. In such case,
they eventually need to run a costly consensus algorithm to balance
documents~\cite{zawirski2011asynchronous}. Finally, Algorithm
\LSEQ~\cite{nedelec2013concurrency} aims to avoid such consensus by
sublinearly upper-bounding the space complexity of its identifiers. It
conjectured a polylogarithmic growth of the identifiers size
$\mathcal{O}(\log(d)^2)$ where $d$ is the document size.

%% for positioning reason, table from related work is here
\begin{table*}[t]
  \centering
  \input{./input/complexitiestable.tex}
  \caption{\label{table:complexities}
    Communication and space complexities of decentralized approaches.
    $W$ is the number of writers, 
    $R$ is the number of replicas (readers and writers),
    $H$ is the number of operations in the historic (insertions and deletions),
    and $I$ is the number of insertions.
    Bottlenecks of each approach are highlighted.}
\end{table*}

In this paper, we propose \CRATE, a scalable real-time editor that runs on a
network of browsers. \CRATE relies on WebRTC and browser-to-browser
communication to provide an easy access for end-users. Compared to
state-of-the-art, it presents a new original trade-off which balances the load
between space, time, and communication complexities. The contributions of this
paper are threefold:
\begin{itemize}
\item Compared to previous work~\cite{nedelec2013lseq}, we demonstrate the upper
  bounds on space and time complexities of \LSEQ. It constitutes an original
  trade-off for building decentralized real-time editors.
\item Compared to previous work~\cite{nedelec2015spray}, we deployed the
  adaptive membership protocol \SPRAY in web browsers thanks to
  WebRTC. We observed that \SPRAY is able to support high dynamicity
  of real-time editing sessions thanks to its adaptivity.
\item We conducted experimental studies to validate the complexities of
  \CRATE. The experiments took place in the Grid'5000 testbed and involved
  uptill $600$ real web browsers opened to edit a shared document. At a rate of
  100 insertions per seconds, the document size reached above 1 million
  characters. As expected, we observed a logarithmic growth of the traffic
  compared to the number of participants, and a polylogarithmic growth of the
  traffic compared to the size of the document. This result confirms that \CRATE
  does not require any costly garbage collection mechanism.
\end{itemize}

The remainder of this paper is organized as follows:
Section~\ref{sec:relatedwork} reviews the related work with an emphasis on the
complexity trade-off proposed by other approaches. Section~\ref{sec:proposal}
follows with a description of \CRATE and its core
components. Section~\ref{sec:experiments} highlights the scalability of \CRATE
while validating the complexity analysis of \LSEQ and \SPRAY. Finally,
Section~\ref{sec:conclusion} concludes the paper and discusses about
perspectives.

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "../paper"
%%% End: 
