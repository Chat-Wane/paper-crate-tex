
\section{Introduction-Pascal}

%Real-time collaborative editors are used by millions of users and allow them to
%distribute the work over locations and across organizations.


Google Doc made real-time editing in browsers easy for millions of
users. However, Google mediates real-time editing sessions with
central servers raising issues on privacy, censorship, economic
intelligence. It also raises scalability issues in term of number of
participants. If currently real-time editors is mainly used by small
groups, supporting large groups occurs in contexts such as massive
online courses, conferences, TV-shows where people want to share their
notes. Google doc supports large groups but currently only fifty first
users can edit in real-time, next users can only view the shared
document without editing. We think that real-time editors should allow
anybody to edit anytime whatever the number of participants.

Decentralized real-time editors ~\cite{oster2006data,
  sun1998operational, sun2009contextbased} do not require intermediate
servers and leverage privacy issues. However, scalability issues
remains.

Addressing the scalabilty issue require to find a good trade-off
between communication, space and time complexities. To be
scalable, communication complexity of decentralized editors has to be
sublinear to the number of participants. In the best case, if we have
$n$ participants, sending a typed character to others requires to
contact $log(n)$ participants. But consistency maintenance of
real-time editors requires to piggy back to each message extra
informations that impact greatly the whole communication complexity.

Decentralized algorithms of operational
transformation~\cite{sun2009contextbased} require to piggy-back a
state vector in order to detect concurrent operations. Unfortunately,
state vectors grow linearly compared to the number of participants that
ever participated in the authoring.

Conflict-Free Replicated Data Types~\cite{shapiro2011comprehensive}
(CRDTs) such as WOOT~\cite{oster2006data} piggyback a constant-size
identifier which is optimal. Nonetheless, their local space complexity
grows monotonically which eventually leads to the need of costly
garbage collecting. Other algorithms~\cite{preguica2009commutative,
  weiss2010logootundo} limit their local space
consumption. Nevertheless, they piggyback variable-size identifiers
that can grow linearly compared to the document size. In such case,
they eventually need to run a costly consensus algorithm to rebalance
documents~\cite{zawirski2011asynchronous}. Finally, the \LSEQ
algorithm~\cite{nedelec2013concurrency} aims to avoid such consensus
by sublinearly upper-bounding the space complexity of its
identifiers. It conjectured that identifiers can be bounded to
  the $log(s)^2$ where $s$ is the size of shared document.

%% for positioning reason, table from related work is here
\begin{table*}[t]
  \centering
  \input{./input/complexitiestable.tex}
  \caption{\label{table:complexities}
    Communication and space complexities of decentralized approaches.
    Where $\mathcal{W}$ is the set of writers, 
    $\mathcal{R}$ is the set of replicas (readers and writers),
    $H$ is the historic of operations (insertions and deletions),
    and $I$ is the number of insertions.}
\end{table*}


In this paper, we propose \CRATE, a scalable real-time editor that runs on a
network of browsers. \CRATE relies on WebRTC and browser-to-browser
communication to provide an easy access for end-users. Compared to
state-of-the-art, it presents a new original trade-off which balances the load
between space, time, and communication complexities. The contributions of this
paper are \TODO{three}fold:
\begin{itemize}
\item Compared to previous work~\cite{nedelec2013lseq}, we demonstrate the upper
  bounds on space and time complexities of \LSEQ. This result creates
  a new trade-off for building decentralized real-time editors.
\item Compared to previous work~\cite{nedelec2015spray}, we deployed
  the \SPRAY adaptive membership protocol in browsers thanks to WebRTC
  and observed performances. Results confirm the simulation results on a
  setup involving real-time editing in browsers and WebRTC.
\item We conducted experimental studies to validate the complexities of
  \CRATE. The experiments took place in the Grid'5000 testbed and involved
  uptill $600$ real web browsers opened to edit a shared document. At a rate of
  100 insertions per seconds, the document size reached above 1 million
  characters. As expected, we observed a logarithmic growth of the traffic
  compared to the number of participants, and a polylogarithmic growth of the
  traffic compared to the size of the document. This result confirm
  that CRATE do not require costly garbage collection. 
\end{itemize}

The remainder of this paper is organized as follows:
Section~\ref{sec:relatedwork} reviews the related work with an emphasis on the
complexity trade-off proposed by other approaches. Section~\ref{sec:proposal}
follows with a description of \CRATE and its core
components. Section~\ref{sec:experiments} highlights the scalability of \CRATE
while validating the complexity analysis of \LSEQ and \SPRAY. Finally,
Section~\ref{sec:conclusion} concludes the paper and discusses about
perspectives.

% \section{Introduction-brice}

% Google Docs or Etherpad allow millions of users to start and access real-time
% editing sessions very easily by the mean of URLs in web browsers. Yet, such
% editors require collaboration providers to setup servers and enable
% collaboration. It implies issues in privacy, censorship, and economic
% intelligence. It also implies scalability issues in term of number of
% participants. Despite that current editors limit \emph{de facto} the groups
% size, emerging contexts (e.g. massive online courses, conferences, TV-shows)
% expose the needs of larger collaboration groups.  For instance, writing notes on
% Google Docs is possible uptill fifty users. Next users have their rights limited
% to the reading of the document.

% Decentralized real-time editors~\cite{oster2006data, sun1998operational,
%   sun2009contextbased} do not require intermediate servers and by the same solve
% privacy-related issues. However, scalability issues remain.  Solving scalability
% issues requires finding a good trade-off between communication, space and time
% complexities. Such trade-off mainly consists in a sublinear communication
% complexity compared to the editing session size. While the transmission of
% operations requires at least a multiplicative factor logarithmically scaling
% compared to the network size, maintaining consistency requires piggybacking
% additional metadata the complexity of which must be carefully studied.

% Decentralized algorithms that belong to operational
% transformation~\cite{sun2009contextbased} approach require piggybacking a state
% vector in order to detect concurrent operations. Unfortunately, state vectors
% grow linearly compared to the number of members that ever participated in the
% authoring.

% Conflict-Free Replicated Data Types~\cite{shapiro2011comprehensive} (CRDTs) such
% as WOOT~\cite{oster2006data} piggyback a constant-size identifier which is
% optimal. Nonetheless, their local space complexity grows monotonically which
% eventually leads to the need of an unaffordable garbage collecting. Other
% algorithms~\cite{preguica2009commutative, weiss2010logootundo} limit their local
% space consumption. Nevertheless, they piggyback variable-size identifiers that
% can grow linearly compared to the document size. In such case, they eventually
% need to run a costly consensus algorithm to rebalance
% documents~\cite{zawirski2011asynchronous}. Finally, the \LSEQ
% algorithm~\cite{nedelec2013concurrency} aims to avoid such consensus by
% sublinearly upper-bounding the space complexity of its identifiers. \TODO{It
%   conjectured that identifiers can be bounded to the $log(s)^2$ where $s$ is the
%   size of shared document.}

% %% for positioning reason, table from related work is here
% \begin{table*}[t]
%   \centering
%   \input{./input/complexitiestable.tex}
%   \caption{\label{table:complexities}
%     Communication and space complexities of decentralized approaches.
%     Where $\mathcal{W}$ is the set of writers, 
%     $\mathcal{R}$ is the set of replicas (readers and writers),
%     $H$ is the historic of operations (insertions and deletions),
%     and $I$ is the number of insertions.}
% \end{table*}


% In this paper, we propose \CRATE, a scalable real-time editor that runs on a
% network of browsers. \CRATE relies on WebRTC and browser-to-browser
% communication to provide an easy access for end-users. Compared to
% state-of-the-art, it presents a different trade-off which balances the load
% between space, time, and communication complexities. The contributions of this
% paper are \TODO{three}fold:
% \begin{itemize}
% \item Compared to previous work~\cite{nedelec2013lseq}, we demonstrate the upper
%   bounds on space and time complexities of \LSEQ. In addition to which we
%   provide the communication complexity of \CRATE. We shows the balance in these
%   dimensions and we position it in relation to state-of-the-art.
% \item \TODO{Compared to previous work~\cite{nedelec2015spray}, we create a real
%     network of browser and demonstrate the feasability of deployement of
%     \SPRAY. We confirm the simulation results on a setup involving real web
%     browsers and WebRTC.}
% \item We describe \CRATE's internal components. In particular, we detail \LSEQ
%   that manages the shared document, and \SPRAY that creates the network of
%   browsers. Our Javascript implementation of \CRATE runs directly in browsers
%   without any plugins.
% \item We conducted experimental studies to validate the complexities of
%   \CRATE. The experiments took place in the Grid'5000 testbed and involved
%   uptill $600$ real web browsers opened to edit a shared document. At a rate of
%   100 insertions per seconds, the document size reached above 1 million
%   characters. As expected, we observed a logarithmic growth of the traffic
%   compared to the number of participants, and a polylogarithmic growth of the
%   traffic compared to the size of the document.
% \end{itemize}

% The remainder of this paper is organized as follows:
% Section~\ref{sec:relatedwork} reviews the related work with an emphasis on the
% complexity trade-off proposed by other approaches. Section~\ref{sec:proposal}
% follows with a description of \CRATE and its core
% components. Section~\ref{sec:experiments} highlights the scalability of \CRATE
% while validating the complexity analysis of \LSEQ and \SPRAY. Finally,
% Section~\ref{sec:conclusion} concludes the paper and discusses about
% perspectives.

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "../paper"
%%% End: 
